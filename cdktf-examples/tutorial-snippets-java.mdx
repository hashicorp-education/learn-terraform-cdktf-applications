## Initialize your CDKTF application

```shell
cdktf init --template=java \
           --project-name=learn-terraform-cdktf-applications \
           --project-description="Learn how to develop CDKTF applications" \
           --providers="kubernetes@~>2.14" \
           --local
```

```shell
Note: By supplying '--local' option you have chosen local storage mode for storing the state of your stack.
This means that your Terraform state file will be stored locally on disk in a file 'terraform.<STACK NAME>.tfstate' in the root of your project.
? Do you want to send crash reports to the CDKTF team? See
https://www.terraform.io/cdktf/create-and-deploy/configuration-file#enable-crash-reporting-for-the-cli for more information Yes
##...
Use Providers:

  You can add prebuilt providers (if available) or locally generated ones using the add command:

  cdktf provider add "aws@~>3.0" null kreuzwerker/docker

  All prebuilt providers are available on Maven Central: https://mvnrepository.com/artifact/com.hashicorp
  You can also add these providers directly to your pom.xml file.

  You can also build any module or provider locally. Learn more: https://cdk.tf/modules-and-providers

========================================================================================================
Checking whether pre-built provider exists for the following constraints:
  provider: kubernetes
  version : ~>2.14
  language: java
  cdktf   : 0.15.1

Found pre-built provider.
Adding com.hashicorp.cdktf-provider-kubernetes @ 5.0.1 to pom.xml
Package installed.
```

```diff
               .spec(DeploymentSpec.builder()
-                        .replicas("1")
+                        .replicas("4")
                         .selector(DeploymentSpecSelector.builder()

```

```shell
----
$ mvn test
[INFO] Scanning for projects...
[INFO]
[INFO] -----------------------< com.mycompany.app:app >------------------------
[INFO] Building app 0.1
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/mutahhir/src/hc/learn-terraform-cdktf-applications/cdktf-examples/java/src/main/resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ app ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/mutahhir/src/hc/learn-terraform-cdktf-applications/cdktf-examples/java/src/test/resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ app ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-surefire-plugin:2.22.0:test (default-test) @ app ---
[INFO]
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.company.app.MainTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.013 s - in com.company.app.MainTest
[INFO] Running com.company.constructs.KubernetesWebAppTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.512 s - in com.company.constructs.KubernetesWebAppTest
[INFO] Running MainTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in MainTest

[INFO]
[INFO] Results:
[INFO]
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  3.139 s
[INFO] Finished at: 2023-01-31T16:28:56+01:00
[INFO] ------------------------------------------------------------------------
```

```shell

[INFO] Scanning for projects...
[INFO]
[INFO] -----------------------< com.mycompany.app:app >------------------------
[INFO] Building app 0.1
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/mutahhir/src/hc/learn-terraform-cdktf-applications/cdktf-examples/java/src/main/resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ app ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 6 source files to /Users/mutahhir/src/hc/learn-terraform-cdktf-applications/cdktf-examples/java/target/classes
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ app ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /Users/mutahhir/src/hc/learn-terraform-cdktf-applications/cdktf-examples/java/src/test/resources
[INFO]
[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ app ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 3 source files to /Users/mutahhir/src/hc/learn-terraform-cdktf-applications/cdktf-examples/java/target/test-classes
[INFO]
[INFO] --- maven-surefire-plugin:2.22.0:test (default-test) @ app ---
[INFO]
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.company.app.MainTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.014 s - in com.company.app.MainTest
[INFO] Running com.company.constructs.KubernetesWebAppTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.544 s - in com.company.constructs.KubernetesWebAppTest
[INFO] Running com.company.constructs.KubernetesNodePortServiceTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 s - in com.company.constructs.KubernetesNodePortServiceTest

[INFO]
[INFO] Results:
[INFO]
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  3.714 s
[INFO] Finished at: 2023-01-31T16:54:47+01:00
[INFO] ------------------------------------------------------------------------
```

```shell
$ cdktf deploy

â ‹  Starting
[2023-01-31T16:57:34.533] [WARN] default - WARNING: Found NODE_OPTIONS environment variable without a setting for --max-old-space-size
The synthesizing step for TypeScript may need an increased amount of memory if multiple large providers
are used with locally generated bindings. You can ignore this if you don't use CDKTF with TypeScript.
If not present, the cdktf-cli sets it to NODE_OPTIONS="--max-old-space-size=4096" by default. But as
app  Initializing the backend...
app  Initializing provider plugins...
     - Reusing previous version of hashicorp/kubernetes from the dependency lock file
app  - Using previously-installed hashicorp/kubernetes v2.17.0
     Plan: 1 to add, 0 to change, 0 to destroy.

     Do you want to perform these actions?
       Terraform will perform the actions described above.
       Only 'yes' will be accepted to approve.

       Enter a value:
app  yes
app  kubernetes_service.service_E7C408F2 (service/service): Creating...
app  kubernetes_service.service_E7C408F2 (service/service): Creation complete after 0s [id=default/myapp-frontend-dev]
app
     Apply complete! Resources: 1 added, 0 changed, 0 destroyed.


No outputs found.
```

```diff
                new SimpleKubernetesWebApp(this, "app_frontend", new SimpleKubernetesWebAppConfig()
-                               .setImage("nginx:latest")
+                               .setImage("localhost:5000/nocorp-frontend:latest")
                                .setReplicas(3)
                                .setApp("myapp")
                                .setComponent("frontend")
                                .setEnvironment("dev")
                                .setPort(30001));
```
